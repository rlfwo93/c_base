#include<stdio.h>
#include<stdlib.h>
#include<string.h>

typedef struct academic_record {
    int  ID; //기본키 역할
	char *University;
	char *name;
	char *department;

}RECORD;

// RECORD compare(RECORD a, int ID);
RECORD input();

int main(){

	FILE* fp;
	int count = 0;
	RECORD record[30];

	fp = fopen("C:/Users/USER/Desktop/pratice/aa.csv", "w"); //경로에 파일을 만듬.
															 // db형태로 출력하기 위해 csv로 만듬.
	fputs("학교,학과,이름,학번\n\n", fp); // 열 항목을 파일에 입력

	while (true)
	{
		char judge[10] = "",combine[100] = "";
		
		RECORD temp = input();
		bool is_same = false; //ID값 중복판별
		
		if (count==0)
		{	
			sprintf(combine, "%s,%s,%s,%d\n", temp.University, temp.department, temp.name, temp.ID);
			record[count] = temp;
			fputs(combine, fp);
			count++;
		}
		else {

			for (int i = 0; i < count; i++)
			{
				if (record[i].ID == temp.ID) {

						printf("\nID값이 중복입니다. 등록할 수 없습니다\n\n");
						is_same = true;
						break;
				}
			}

			if (!is_same) {
				sprintf(combine, "%s,%s,%s,%d\n", temp.University, temp.department, temp.name, temp.ID);
				record[count] = temp;
				fputs(combine, fp);
				count++;
			}
		}

		printf("입력을 종료 하시겠습니까? (네)\n");
		scanf("%s", judge);

		if (strcmp(judge,"네") == 0)  break; 
		else  continue; 	
	}
	fclose(fp);
}
/*RECORD compare(RECORD a, int ID) {

	for (int i = 0; i < ; i++)
	{

	}

};
*/
 RECORD input() {
	 RECORD record;
	 char input_University[100] = "", input_Name[100] = "", input_Department[100] = "";
	 int input_ID = 0;
	 printf("대학,학과,이름,학번을 입력하세요.\n");
	 scanf("%s %s %s %d", input_University, input_Department, input_Name, &input_ID);
	 record.University = input_University;
	 record.department = input_Department;
	 record.name = input_Name;
	 record.ID = input_ID;

	 return record;
 };
